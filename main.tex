\RequirePackage{fix-cm}
\documentclass[ titlepage,numbers=noenddot,headinclude,
                footinclude=true,cleardoublepage=empty,abstractoff,
                BCOR=5mm,paper=letter,fontsize=12pt,
                american,
                openany
                ]{scrreprt}

\input{classicthesis-config}

% Override margins
\usepackage[left=1in,right=1in,top=1in,bottom=1in,includehead,includefoot]{geometry}


\usepackage{scrlayer-scrpage}
\usepackage{color, colortbl,placeins}
\usepackage{comment}
\usepackage{multicol}
\usepackage{amssymb,mathtools,amsthm,bm,units}

\usepackage{algorithm}
\usepackage{algorithmic}
% \usepackage{algorithmicx}
% \usepackage{algorithm}
% \usepackage{algcompatible}
\usepackage{adjustbox}

\usepackage[noend]{algpseudocode}
\usepackage{multirow}

% promaml
\usepackage{varwidth}

%avail
\usepackage{makecell}
\usepackage{tcolorbox}

\usepackage{mdframed}
\usepackage{wrapfig}
\usepackage{verbatim}
\usepackage{sidecap}
\usepackage{pdfpages}
\usepackage{biblatex}
% \usepackage[backend=biber]{biblatex}
\usepackage{booktabs} % for tables
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
%\usepackage{algorithm2e} % alg package used by pearl....creates issues
\usepackage{setspace} % used for spacing in the title page
\usepackage{afterpage}
\input{math_commands}
\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage}

\DeclareCiteCommand{\cite}
  {\usebibmacro{prenote}}
  {\usebibmacro{citeindex}%
   \printtext[bibhyperref]{\usebibmacro{cite}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\DeclareCiteCommand*{\cite}
  {\usebibmacro{prenote}}
  {\usebibmacro{citeindex}%
   \printtext[bibhyperref]{\usebibmacro{citeyear}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\DeclareCiteCommand{\parencite}[\mkbibparens]
  {\usebibmacro{prenote}}
  {\usebibmacro{citeindex}%
    \printtext[bibhyperref]{\usebibmacro{cite}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\DeclareCiteCommand*{\parencite}[\mkbibparens]
  {\usebibmacro{prenote}}
  {\usebibmacro{citeindex}%
    \printtext[bibhyperref]{\usebibmacro{citeyear}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\DeclareCiteCommand{\footcite}[\mkbibfootnote]
  {\usebibmacro{prenote}}
  {\usebibmacro{citeindex}%
  \printtext[bibhyperref]{ \usebibmacro{cite}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\DeclareCiteCommand{\footcitetext}[\mkbibfootnotetext]
  {\usebibmacro{prenote}}
  {\usebibmacro{citeindex}%
   \printtext[bibhyperref]{\usebibmacro{cite}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\DeclareCiteCommand{\textcite}
  {\boolfalse{cbx:parens}}
  {\usebibmacro{citeindex}%
   \printtext[bibhyperref]{\usebibmacro{textcite}}}
  {\ifbool{cbx:parens}
     {\bibcloseparen\global\boolfalse{cbx:parens}}
     {}%
   \multicitedelim}
  {\usebibmacro{textcite:postnote}}
\usepackage{caption}
\usepackage{subcaption}
\captionsetup{subrefformat=parens}
\usepackage{siunitx}
\usepackage{sidecap}
\usepackage{rotating}

\usepackage[capitalize]{cleveref}
\usepackage{enumitem}
%\usepackage{apacite}
\setlist{nosep}


\newmdtheoremenv{definition}{Definition}
\newmdtheoremenv{proposition}{Proposition}
\counterwithin*{proposition}{section}
\newmdtheoremenv{corollary}{Corollary}
\newmdtheoremenv{theorem}{Theorem}
\newmdtheoremenv{lemma}{Lemma}

\newenvironment{customthm}[1]
{\renewcommand\theinnercustomthm{#1}\innercustomthm}
{\endinnercustomthm}
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}

% mandril
\usepackage{tikz}
\usetikzlibrary{bayesnet}
\tikzset{>=latex}
\usetikzlibrary{arrows,automata}

\usepackage{booktabs} % for professional tables

%%%%%%% BIBS
%\addbibresource{revolver/revolver.bib}
%\addbibresource{pearl/pearl.bib}
%\addbibresource{meld/meld.bib}
%\addbibresource{mi/mi.bib}
% \addbibresource{main.bib} % union set of all the bibs
% \addbibresource{bibs/main1_val.bib}
% \addbibresource{bibs/main2_rig.bib}
% \addbibresource{bibs/main3_bcddpg.bib}
% \addbibresource{bibs/main4_awac.bib}
% \addbibresource{bibs/main5_skewfit.bib}
% \addbibresource{bibs/main6_residualrl.bib}
% \addbibresource{bibs/main7_insertion.bib}
% \addbibresource{bibs/main8_ptp.bib}
% \addbibresource{bibs/main9_daib.bib}
% \addbibresource{bibs/main9_daib_old.bib}
\addbibresource{bibs/main1_val_bibertool.bib}
\DeclareUnicodeCharacter{0301}{*************************************}

%%%%% FIGURES
\graphicspath{{mandril/}}


\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\pagestyle{plain}

\begin{document}
\frenchspacing
\raggedbottom
\selectlanguage{american}

%\pagestyle{fancy}

%\pagestyle{simple}

\include{FrontBackmatter/Titlepage}
% \afterpage{\blankpage}

\null
\begin{center}
    \thispagestyle{empty}
    \vspace*{\fill}
    Copyright \copyright \; 2022 -- Ashvin Nair\\
All rights reserved.
    \vspace*{\fill}
\end{center}
\newpage

% according to style guide, abstract must have arabic page # 1
\setcounter{page}{1}
\pagenumbering{arabic}
% \pagestyle{simple}
\pdfbookmark[0]{Abstract}{Abstract}
% \section*{Abstract}
\input{abstract}

\clearpage

% the rest of the prelim pages are numbered with roman numerals
\setcounter{page}{1}%
\pagenumbering{roman}

\begin{center}
    % \thispagestyle{empty}
    \vspace*{\fill}
    To my parents.
    \vspace*{\fill}
\end{center}
\clearpage

\newpage

\pdfbookmark[0]{Acknowledgements}{Acknowledgements}
\begingroup
\let\clearpage\relax
\let\cleardoublepage\relax
\let\cleardoublepage\relax
\chapter*{Acknowledgments}
\input{acknowledgements}
\endgroup

\newpairofpagestyles[scrheadings]{firstpage}{\chead*{}\cfoot*{\pagemark}\ohead*{}}

\pagestyle{firstpage}

\include{FrontBackmatter/Contents}

% the actual thesis uses roman numeral page #s
\setcounter{page}{1}
\pagenumbering{arabic}

\chapter{Introduction}\label{chapter:intro}
\input{introduction}

%%%%%%%%%%%% START OF PAPER CONTENT

\part{Reinforcement Learning with Imagined Goals}

\chapter{Visual Reinforcement Learning with Imagined Goals}\label{chapter:rig}
\input{rig/rig}

\chapter{Contextual Imagined Goals for Self-Supervised Robotic Learning}\label{chapter:ccrig}
\input{ccrig/ccrig}   %%%%%% CH %%%%%% 

\chapter{SkewFit: State-Covering Self-Supervised Reinforcement Learning}\label{chapter:skewfit}
\input{skewfit/skewfit}   %%%%%% CH %%%%%% 

\part{Accelerating Reinforcement Learning with Prior Knowledge}

\chapter{Overcoming Exploration in Reinforcement Learning with Demonstrations}\label{chapter:bcddpg}
\input{bcddpg/bcddpg} %%%%%% CH %%%%%% 

\chapter{AWAC: Accelerating Online Reinforcement Learning with Offline Datasets}\label{chapter:awac}
 \input{awac/awac}  %%%%%% CH %%%%%% 

\chapter{Offline Reinforcement Learning with Implicit Q-Learning}\label{chapter:iql}
\input{iql/iql}   %%%%%% CH %%%%%% 

\chapter{Residual Reinforcement Learning for Robot Control}\label{chapter:residualrl}
\input{residualrl/residualrl}  %%%%%% CH %%%%%% 

\chapter{Deep Reinforcement Learning for Industrial Insertion Tasks with Visual Inputs and Natural Rewards}\label{chapter:insertion}
\input{insertion/insertion} %%%%%% CH %%%%%% 

\chapter{Learning on the Job: Industrial Insertion of Novel Connectors from Vision}\label{chapter:daib}
\input{daib/daib}   %%%%%% CH %%%%%% 

\part{Affordance Learning in Unseen Environments}

% %% DONE
\chapter{Learning New Skills by Imagining Visual Affordances}\label{chapter:val}
\input{val/val}  %%%%%% CH %%%%%% 

\chapter{Planning to Practice: Efficient Online Fine-Tuning by Composing Goals in Latent Space}\label{chapter:ptp}
\input{ptp/ptp}   %%%%%% CH %%%%%% 

%%%%%%%%%%%%% END OF PAPER CONTENT

\chapter{Conclusion}\label{chapter:conclusion}
\input{conclusion}

\printbibliography

% Appendices
\appendix

\chapter{Appendix: Chapter 2}\label{app:rig}
\input{rig/rig_appendix}

\chapter{Appendix: Chapter 3}\label{app:ccrig}
\input{ccrig/ccrig_appendix}

\chapter{Appendix: Chapter 4}\label{app:skewfit}
\input{skewfit/skewfit_appendix}

\chapter{Appendix: Chapter 6}\label{app:awac}
\input{awac/awac_appendix}

\chapter{Appendix: Chapter 7}\label{app:iql}
\input{iql/iql_appendix}

\chapter{Appendix: Chapter 11}\label{app:val}
\input{val/val_appendix}


\end{document}
